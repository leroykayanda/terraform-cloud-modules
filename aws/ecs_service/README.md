

    module "ecs_service" {
      source                            = "./modules/ecs_service"
      service                           = var.ecs_service_name
      cluster_arn                       = data.aws_ecs_cluster.ecs_cluster.arn
      cluster_name                      = var.ecs_cluster_name
      container_name                    = var.container_name
      container_image                   = local.container_image
      task_execution_role               = aws_iam_role.ecs_task_execution_role.arn
      world                             = var.world # The parameters below are optional and have sensible defaults. Review to see which ones need to be changed. 
      tags                              = var.tags[var.world]
      region                            = var.region
      entry_point                       = var.entry_point[var.world]
      port_mappings                     = var.port_mappings
      task_environment_variables        = var.task_environment_variables[var.world]
      task_secret_environment_variables = var.task_secret_environment_variables
      logging_type                      = var.logging_type
      cloudwatch_logs_retention         = var.cloudwatch_logs_retention
      service_autoscaling_settings      = var.service_autoscaling_settings[var.world]
      task_resources                    = var.task_resources[var.world]
      vpc_id                            = var.vpc_id[var.world]
      sns_topic                         = var.sns_topic[var.world]
      two_containers                    = var.two_containers
      container_name_2                  = var.container_name_2
      container_image_2                 = var.container_image_2
      task_launch_type                  = var.task_launch_type
      platform_version                  = var.platform_version
      create_volume                     = var.create_volume
      efs_volume_name                   = var.efs_volume_name
      efs_file_system_id                = var.efs_file_system_id
      efs_access_point_id               = var.efs_access_point_id
      mount_points                      = var.mount_points
      command                           = var.command
      user                              = var.user
      entry_point_2                     = var.entry_point_2
      port_mappings_2                   = var.port_mappings_2
      container_network_mode            = var.container_network_mode
      health_check_grace_period_seconds = var.health_check_grace_period_seconds
      task_subnets                      = var.task_subnets
      task_security_group               = var.task_security_group
      create_elb                        = var.create_elb
      elb_settings                      = var.elb_settings
      elb_subnets                       = var.elb_subnets
      elb_security_group                = var.elb_security_group
      elb_certificate_arn               = var.elb_certificate_arn
      elb_access_logs_bucket            = var.elb_access_logs_bucket
      company_name                      = var.company_name
    }
